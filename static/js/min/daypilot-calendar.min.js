/*
DayPilot Lite
Copyright (c) 2005 - 2015 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 171-lite
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Calendar!=='undefined'){return;};function loadDefaultCss(){if(DayPilot.Global.defaultCalendarCss){return;};var $b=DayPilot.sheet();$b.add(".calendar_default_main","border: 1px solid #999;font-family: Tahoma, Arial, sans-serif; font-size: 12px;");$b.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #666;background: #eee;");$b.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;	border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;");$b.add(".calendar_default_colheader_inner","text-align: center; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;");$b.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff");$b.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_message","opacity: 0.9;filter: alpha(opacity=90);	padding: 10px; color: #ffffff;background: #ffa216;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'color: #666; border: 1px solid #999;');$b.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;");$b.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");');$b.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;");$b.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;padding: 2px;margin-right: 1px;font-size: 12px;");$b.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;");$b.add(".calendar_default_event","cursor: default;");$b.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;font-size: 12px;");$b.add(".calendar_default_shadow_inner","background-color: #666666;	opacity: 0.5;filter: alpha(opacity=50);height: 100%;");$b.commit();DayPilot.Global.defaultCalendarCss=true;};var DayPilotCalendar={};DayPilotCalendar.selectedCells=[];DayPilotCalendar.topSelectedCell=null;DayPilotCalendar.bottomSelectedCell=null;DayPilotCalendar.selecting=false;DayPilotCalendar.column=null;DayPilotCalendar.firstSelected=null;DayPilotCalendar.firstMousePos=null;DayPilotCalendar.originalMouse=null;DayPilotCalendar.originalHeight=null;DayPilotCalendar.originalTop=null;DayPilotCalendar.resizing=null;DayPilotCalendar.globalHandlers=false;DayPilotCalendar.moving=null;DayPilotCalendar.register=function($c){if(!DayPilotCalendar.registered){DayPilotCalendar.registered=[];};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){if(r[i]===$c){return;}};r.push($c);};DayPilotCalendar.unregister=function($c){var a=DayPilotCalendar.registered;if(!a){return;};var i=DayPilot.indexOf(a,$c);if(i===-1){return;};a.splice(i,1);};DayPilotCalendar.getCellsAbove=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.previousSibling;while(tr&&tr.tagName!=="TR"){tr=tr.previousSibling;}};return $e;};DayPilotCalendar.getCellsBelow=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.nextSibling;while(tr&&tr.tagName!=="TR"){tr=tr.nextSibling;}};return $e;};DayPilotCalendar.getColumn=function($d){var i=0;while($d.previousSibling){$d=$d.previousSibling;if($d.tagName==="TD"){i++;}};return i;};DayPilotCalendar.gUnload=function(ev){if(!DayPilotCalendar.registered){return;};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){var c=r[i];c.dispose();DayPilotCalendar.unregister(c);}};DayPilotCalendar.gMouseUp=function(e){if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;return;};var $g=DayPilotCalendar.resizing.event;var $h=DayPilotCalendar.resizingShadow.clientHeight+4;var top=DayPilotCalendar.resizingShadow.offsetTop;var $i=DayPilotCalendar.resizing.dpBorder;DayPilotCalendar.deleteShadow(DayPilotCalendar.resizingShadow);DayPilotCalendar.resizingShadow=null;DayPilotCalendar.resizing.style.cursor='default';$g.calendar.nav.top.style.cursor='auto';DayPilotCalendar.resizing.onclick=null;DayPilotCalendar.resizing=null;$g.calendar.eventResizeDispatch($g,$h,top,$i);}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.moving=null;document.body.style.cursor='default';return;};var top=DayPilotCalendar.movingShadow.offsetTop;DayPilotCalendar.deleteShadow(DayPilotCalendar.movingShadow);var $g=DayPilotCalendar.moving.event;var $j=DayPilotCalendar.movingShadow.column;DayPilotCalendar.moving=null;DayPilotCalendar.movingShadow=null;$g.calendar.nav.top.style.cursor='auto';var ev=e||window.event;$g.calendar.eventMoveDispatch($g,$j,top,ev);}else if(DayPilotCalendar.selecting&&DayPilotCalendar.topSelectedCell!==null){var $c=DayPilotCalendar.selecting.calendar;DayPilotCalendar.selecting=false;var $k=$c.getSelection();$c.timeRangeSelectedDispatch($k.start,$k.end);if($c.timeRangeSelectedHandling!=="Hold"&&$c.timeRangeSelectedHandling!=="HoldForever"){$a();}}else{DayPilotCalendar.selecting=false;}};DayPilotCalendar.deleteShadow=function($l){if(!$l){return;};if(!$l.parentNode){return;};$l.parentNode.removeChild($l);};DayPilotCalendar.moveShadow=function($m){var $l=DayPilotCalendar.movingShadow;var parent=$l.parentNode;parent.style.display='none';$l.parentNode.removeChild($l);$m.firstChild.appendChild($l);$l.style.left='0px';parent.style.display='';$l.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};DayPilotCalendar.Calendar=function(id){var $n=false;if(this instanceof DayPilotCalendar.Calendar&&!this.$1G){$n=true;this.$1G=true;};if(!$n){throw "DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";};var $c=this;this.uniqueID=null;this.v='171-lite';this.id=id;this.clientName=id;this.cache={};this.cache.pixels={};this.elements={};this.elements.events=[];this.nav={};this.afterRender=function(){};this.fasterDispose=true;this.angularAutoApply=true;this.api=2;this.borderColor="#CED2CE";this.businessBeginsHour=9;this.businessEndsHour=18;this.cellBackColor="#ffffff";this.cellBorderColor="#DEDFDE";this.cellHeight=20;this.columnMarginRight=5;this.cornerBackColor="#F3F3F9";this.cssOnly=true;this.cssClassPrefix="calendar_default";this.days=1;this.durationBarVisible=true;this.eventBackColor='#638EDE';this.eventBorderColor="#2951A5";this.eventFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventFontSize='8pt';this.eventFontColor="#ffffff";this.eventHeaderFontSize='8pt';this.eventHeaderFontColor="#ffffff";this.eventHeaderHeight=14;this.eventHeaderVisible=true;this.headerFontSize='10pt';this.headerFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.headerFontColor="#42658C";this.headerHeight=20;this.height=300;this.heightSpec='BusinessHours';this.hideUntilInit=true;this.hourHalfBorderColor="#EBEDEB";this.hourBorderColor="#DEDFDE";this.hourFontColor="#42658C";this.hourFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.hourFontSize="16pt";this.hourNameBackColor="#F3F3F9";this.hourNameBorderColor="#DEDFDE";this.hourWidth=45;this.initScrollPos='Auto';this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.loadingLabelBackColor="ff0000";this.loadingLabelFontColor="#ffffff";this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.loadingLabelFontSize="10pt";this.selectedColor="#316AC5";this.showToolTip=true;this.startDate=new DayPilot.Date().getDatePart();this.timeFormat='Clock12Hours';this.visible=true;this.timeRangeSelectedHandling='Enabled';this.eventClickHandling='Enabled';this.eventResizeHandling='Update';this.eventMoveHandling='Update';this.onEventClick=null;this.onEventClicked=null;this.onEventMove=null;this.onEventMoved=null;this.onEventResize=null;this.onEventResized=null;this.onTimeRangeSelect=null;this.onTimeRangeSelected=null;this.clearSelection=function(){for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d){if($d.selected){$d.removeChild($d.selected);$d.firstChild.style.display='';$d.selected=null;}}}};this.ie=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);this.ff=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1);this.opera105=(function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=10.5;};return false;})();this.webkit522=(function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=522;};return false;})();this.cleanSelection=this.clearSelection;this.callBack2=function($o,$p,$q){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.callbackTimeout=window.setTimeout(function(){$c.loadingStart();},100);var $r={};$r.action=$o;$r.parameters=$q;$r.data=$p;$r.header=this.getCallBackHeader();var $s="JSON"+DayPilot.JSON.stringify($r);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$s,this.ajaxError);}else if(typeof WebForm_DoCallback==='function'){WebForm_DoCallback(this.uniqueID,$s,this.updateView,this.clientName,this.onCallbackError,true);}};this.onCallbackError=function($t,$u){alert("Error!\r\nResult: "+$t+"\r\nContext:"+$u);};this.dispose=function(){var c=$c;c.deleteEvents();c.nav.zoom.onmousemove=null;c.nav.scroll.root=null;DayPilot.pu(c.nav.loading);c.disposeMain();c.disposeHeader();c.nav.select=null;c.nav.cornerRight=null;c.nav.scrollable=null;c.nav.zoom=null;c.nav.loading=null;c.nav.header=null;c.nav.hourTable=null;c.nav.scrolltop=null;c.nav.scroll=null;c.nav.main=null;c.nav.message=null;c.nav.messageClose=null;c.nav.top=null;DayPilotCalendar.unregister(c);};this.registerDispose=function(){this.nav.top.dispose=this.dispose;};this.callBackResponse=function($v){$c.updateView($v.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpc";h.id=this.id;h.v=this.v;h.days=$c.days;h.startDate=$c.startDate;h.heightSpec=$c.heightSpec;h.businessBeginsHour=$c.businessBeginsHour;h.businessEndsHour=$c.businessEndsHour;h.hashes=$c.hashes;h.backColor=$c.cellBackColor;h.timeFormat=$c.timeFormat;h.viewType=$c.viewType;h.locale=$c.locale;return h;};this.createShadow=function($w,$x){var $y=$w.parentNode;while($y&&$y.tagName!=="TD"){$y=$y.parentNode;};var $l=document.createElement('div');$l.setAttribute('unselectable','on');$l.style.position='absolute';$l.style.width=($w.offsetWidth-4)+'px';$l.style.height=($w.offsetHeight-4)+'px';$l.style.left=($w.offsetLeft)+'px';$l.style.top=($w.offsetTop)+'px';$l.style.border='2px dotted #666666';$l.style.zIndex=101;$l.style.backgroundColor="#aaaaaa";$l.style.opacity=0.5;$l.style.filter="alpha(opacity=50)";$l.style.border='2px solid #aaaaaa';if($x&&false){$l.style.overflow='hidden';$l.style.fontSize=$w.style.fontSize;$l.style.fontFamily=$w.style.fontFamily;$l.style.color=$w.style.color;$l.innerHTML=$w.data.client.html();};$y.firstChild.appendChild($l);return $l;};this.$1H={};this.$1H.locale=function(){var $z=DayPilot.Locale.find($c.locale);if(!$z){return DayPilot.Locale.US;};return $z;};var $A=this.$1H;this.updateView=function($t,$u){if($t&&$t.indexOf("$$$")===0){if(window.console){console.log("Error received from the server side: "+$t);}else{throw "Error received from the server side: "+$t;};return;};var $t=eval("("+$t+")");if($t.CallBackRedirect){document.location.href=$t.CallBackRedirect;return;};if($t.UpdateType==="None"){$c.loadingStop();$c.$1I();return;};$c.deleteEvents();if($t.UpdateType==="Full"){$c.columns=$t.Columns;$c.days=$t.Days;$c.startDate=new DayPilot.Date($t.StartDate);$c.heightSpec=$t.HeightSpec?$t.HeightSpec:$c.heightSpec;$c.businessBeginsHour=$t.BusinessBeginsHour?$t.BusinessBeginsHour:$c.businessBeginsHour;$c.businessEndsHour=$t.BusinessEndsHour?$t.BusinessEndsHour:$c.businessEndsHour;$c.headerDateFormat=$t.HeaderDateFormat?$t.HeaderDateFormat:$c.headerDateFormat;$c.viewType=$t.ViewType;$c.backColor=$t.BackColor?$t.BackColor:$c.backColor;$c.eventHeaderVisible=$t.EventHeaderVisible?$t.EventHeaderVisible:$c.eventHeaderVisible;$c.timeFormat=$t.TimeFormat?$t.TimeFormat:$c.timeFormat;$c.locale=$t.Locale?$t.Locale:$c.locale;$c.prepareColumns();};$c.events.list=$t.Events;$c.loadEvents();$c.updateHeaderHeight();if($t.UpdateType==="Full"){$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.$1I();$c.drawEvents();$c.clearSelection();$c.afterRender($t.CallBackData,true);$c.loadingStop();};this.durationHours=function(){return 24;};this.businessHoursSpan=function(){if(this.businessBeginsHour>this.businessEndsHour){return 24-this.businessBeginsHour+this.businessEndsHour;}else{return this.businessEndsHour-this.businessBeginsHour;}};this.rowCount=function(){return 48;};this.$1J=function(){return $c.api===2;};this.eventClickCallBack=function(e,$p){this.callBack2('EventClick',$p,e);};this.eventClickDispatch=function(e){var $B=this;var e=$B.event;if($c.$1J()){var $C={};$C.e=e;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventClick==='function'){$c.$1K.apply(function(){$c.onEventClick($C);});if($C.preventDefault.value){return;}};switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;};if(typeof $c.onEventClicked==='function'){$c.$1K.apply(function(){$c.onEventClicked($C);});}}else{switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;case 'JavaScript':$c.onEventClick(e);break;}}};this.eventResizeCallBack=function(e,$D,$E,$p){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.callBack2('EventResize',$p,$F);};this.eventResizeDispatch=function(e,$G,$H,$i){var $I=1;var $D=new Date();var $E=new Date();var $J=e.start();var end=e.end();if($i==='top'){var $K=$J.getDatePart();var $L=Math.floor(($H-$I)/$c.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$K.addTime(ts);$E=e.end();}else if($i==='bottom'){var $K=end.getDatePart();var $L=Math.floor(($H+$G-$I)/$c.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$J;$E=$K.addTime(ts);};if($c.$1J()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventResize==='function'){$c.$1K.apply(function(){$c.onEventResize($C);});if($C.preventDefault.value){return;}};switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$D,$E);break;case 'Update':e.start($D);e.end($E);$c.events.update(e);break;};if(typeof $c.onEventResized==='function'){$c.$1K.apply(function(){$c.onEventResized($C);});}}else{switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$D,$E);break;case 'JavaScript':$c.onEventResize(e,$D,$E);break;}}};this.eventMoveCallBack=function(e,$D,$E,$N,$p){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.callBack2('EventMove',$p,$F);};this.eventMoveDispatch=function(e,$j,$H,ev){var $I=1;var $L=Math.floor(($H-$I)/$c.cellHeight);var $O=$L*30*60*1000;var $J=e.start();var end=e.end();var $K=new Date();if($J.isDayPilotDate){$J=$J.d;};$K.setTime(Date.UTC($J.getUTCFullYear(),$J.getUTCMonth(),$J.getUTCDate()));var $P=$J.getTime()-($K.getTime()+$J.getUTCHours()*3600*1000+Math.floor($J.getUTCMinutes()/30)*30*60*1000);var length=end.getTime()-$J.getTime();var $Q=this.columns[$j];var $R=$Q.Start.getTime();var $S=new Date();$S.setTime($R+$O+$P);var $D=new DayPilot.Date($S);var $E=$D.addTime(length);if($c.$1J()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventMove==='function'){$c.$1K.apply(function(){$c.onEventMove($C);});if($C.preventDefault.value){return;}};switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'Update':e.start($D);e.end($E);$c.events.update(e);break;};if(typeof $c.onEventMoved==='function'){$c.$1K.apply(function(){$c.onEventMoved($C);});}}else{switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'JavaScript':$c.onEventMove(e,$D,$E,$Q.Value,false);break;}}};this.timeRangeSelectedCallBack=function($J,end,$T,$p){var $U={};$U.start=$J;$U.end=end;this.callBack2('TimeRangeSelected',$p,$U);};this.timeRangeSelectedDispatch=function($J,end){$J=new DayPilot.Date($J);end=new DayPilot.Date(end);if(this.$1J()){var $C={};$C.start=$J;$C.end=end;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onTimeRangeSelect==='function'){$c.$1K.apply(function(){$c.onTimeRangeSelect($C);});if($C.preventDefault.value){return;}};switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($J,end);break;};if(typeof $c.onTimeRangeSelected==='function'){$c.$1K.apply(function(){$c.onTimeRangeSelected($C);});}}else{switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($J,end);break;case 'JavaScript':$c.onTimeRangeSelected($J,end);break;}}};this.onCellMousedown=function(ev){if(DayPilotCalendar.selecting){return;};if($c.timeRangeSelectedHandling==="Disabled"){return;};var $V=(window.event)?window.event.button:ev.which;if($V!==1&&$V!==0){return;};DayPilotCalendar.firstMousePos=DayPilot.mc(ev||window.event);DayPilotCalendar.selecting={};DayPilotCalendar.selecting.calendar=$c;if(DayPilotCalendar.selectedCells){$c.clearSelection();DayPilotCalendar.selectedCells=[];};DayPilotCalendar.column=DayPilotCalendar.getColumn(this);DayPilotCalendar.selectedCells.push(this);DayPilotCalendar.firstSelected=this;DayPilotCalendar.topSelectedCell=this;DayPilotCalendar.bottomSelectedCell=this;$c.activateSelection();return false;};this.activateSelection=function(){var $W=this.getSelection();for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d&&!$d.selected){var $X=document.createElement("div");$X.style.height=($c.cellHeight-1)+"px";$X.style.backgroundColor=$c.selectedColor;$d.firstChild.style.display="none";$d.insertBefore($X,$d.firstChild);$d.selected=$X;}}};this.mousemove=function(ev){if(typeof(DayPilotCalendar)==='undefined'){return;};if(!DayPilotCalendar.selecting){return;};var $Y=DayPilot.mc(ev||window.event);var $Z=DayPilotCalendar.getColumn(this);if($Z!==DayPilotCalendar.column){return;};$c.clearSelection();if($Y.y<DayPilotCalendar.firstMousePos.y){DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsBelow(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.selectedCells[0];DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.firstSelected;}else{DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsAbove(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.firstSelected;DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.selectedCells[0];};$c.activateSelection();};this.getSelection=function(){var $J=DayPilotCalendar.topSelectedCell.start;var end=DayPilotCalendar.bottomSelectedCell.end;return new DayPilot.Selection($J,end,null,$c);};this.mouseup=function(ev){};this.prepareColumns=function(){this.columns=this.$1L();for(var i=0;i<this.columns.length;i++){this.activateColumn(this.columns[i]);}};this.activateColumn=function($m){$m.Start=new DayPilot.Date($m.Start);$m.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $00=this.blocks[i];if($00.overlapsWith(ep.part.top,ep.part.height)){$00.events.push(ep);$00.min=Math.min($00.min,ep.part.top);$00.max=Math.max($00.max,ep.part.top+ep.part.height);return i;}};var $00=[];$00.lines=[];$00.events=[];$00.overlapsWith=function($J,$01){var end=$J+$01-1;if(!(end<this.min||$J>this.max-1)){return true;};return false;};$00.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};$00.events.push(ep);$00.min=ep.part.top;$00.max=ep.part.top+ep.part.height;this.blocks.push($00);return this.blocks.length-1;};$m.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};};this.$1L=function(){var $05=[];var $J=this.startDate.getDatePart();var $06=this.days;switch(this.viewType){case "Day":$06=1;break;case "Week":$06=7;$J=$J.firstDayOfWeek($A.locale().weekStarts);break;case "WorkWeek":$06=5;$J=$J.firstDayOfWeek(1);break;};for(var i=0;i<$06;i++){var $07=$c.headerDateFormat?$c.headerDateFormat:$A.locale().datePattern;var $m={};$m.Start=$J.addDays(i);$m.Name=$m.Start.toString($07);$m.InnerHTML=$m.Name;$05.push($m);};return $05;};this.visibleStart=function(){return this.columns[0].Start;};this.visibleEnd=function(){var $04=this.columns.length-1;return this.columns[$04].Start.addDays(1);};this.$1M=function($08){var $09=this.theme||this.cssClassPrefix;if($09){return $09+$08;}else{return "";}};this.deleteEvents=function(){if(this.elements.events){for(var i=0;i<this.elements.events.length;i++){var $X=this.elements.events[i];var $w=$X.event;if($w){$w.calendar=null;};$X.onclick=null;$X.onclickSave=null;$X.onmouseover=null;$X.onmouseout=null;$X.onmousemove=null;$X.onmousedown=null;if($X.firstChild&&$X.firstChild.firstChild&&$X.firstChild.firstChild.tagName&&$X.firstChild.firstChild.tagName.toUpperCase()==='IMG'){var $0a=$X.firstChild.firstChild;$0a.onmousedown=null;$0a.onmousemove=null;$0a.onclick=null;};$X.helper=null;$X.data=null;$X.event=null;DayPilot.de($X);}};this.elements.events=[];};this.$1N=function($p){var $0b=this.nav.events;var $0c=true;var $0d=true;var $0e=false;var $0f=this.eventBorderColor;var $X=document.createElement("div");$X.style.position='absolute';$X.style.left=$p.part.left+'%';$X.style.top=($p.part.top)+'px';$X.style.width=$p.part.width+'%';$X.style.height=Math.max($p.part.height,2)+'px';$X.style.overflow='hidden';$X.data=$p;$X.event=$p;$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.KhtmlUserSelect='none';if(!this.cssOnly){$X.style.fontFamily=this.eventFontFamily;$X.style.fontSize=this.eventFontSize;$X.style.color=this.eventFontColor;if(!$0c){$X.style.backgroundColor=$0f;}}else{$X.className=this.$1M("_event");if($p.data.cssClass){DayPilot.Util.addClass($X,$p.data.cssClass);}};$X.isFirst=$p.part.start.getTime()===$p.start().getTime();$X.isLast=$p.part.end.getTime()===$p.end().getTime();$X.onclick=this.eventClickDispatch;$X.onmousemove=function(ev){var $0g=5;var $0h=$c.eventHeaderVisible?($c.eventHeaderHeight):10;if(typeof(DayPilotCalendar)==='undefined'){return;};var $0i=DayPilot.mo3($X,ev);if(!$0i){return;};if(DayPilotCalendar.resizing||DayPilotCalendar.moving){return;};var $0j=this.isLast;if($0i.y<=$0h&&$c.eventResizeHandling!=='Disabled'){this.style.cursor="n-resize";this.dpBorder='top';}else if(this.offsetHeight-$0i.y<=$0g&&$c.eventResizeHandling!=='Disabled'){if($0j){this.style.cursor="s-resize";this.dpBorder='bottom';}else{this.style.cursor='not-allowed';}}else if(!DayPilotCalendar.resizing&&!DayPilotCalendar.moving){if($c.eventClickHandling!=='Disabled'){this.style.cursor='pointer';}else{this.style.cursor='default';}}};$X.onmousedown=function(ev){ev=ev||window.event;var $V=ev.which||ev.button;if((this.style.cursor==='n-resize'||this.style.cursor==='s-resize')&&$V===1){DayPilotCalendar.resizing=this;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalHeight=this.offsetHeight;DayPilotCalendar.originalTop=this.offsetTop;$c.nav.top.style.cursor=this.style.cursor;}else if($V===1&&$c.eventMoveHandling!=='Disabled'){DayPilotCalendar.moving=this;DayPilotCalendar.moving.event=this.event;var $0k=DayPilotCalendar.moving.helper={};$0k.oldColumn=$c.columns[this.data.part.dayIndex].Value;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalTop=this.offsetTop;var $0i=DayPilot.mo3(this,ev);if($0i){DayPilotCalendar.moveOffsetY=$0i.y;}else{DayPilotCalendar.moveOffsetY=0;};$c.nav.top.style.cursor='move';};return false;};if(!this.cssOnly){var $0l=[];$0l.push("<div");if(this.showToolTip){$0l.push(" title='");$0l.push($p.client.toolTip().replace(/'/g,"&apos;"));$0l.push("'");};var $h=Math.max($p.part.height-2,0);$0l.push(" class='");$0l.push("'");if($0e){$0l.push(" style='margin-top:1px;height:");$0l.push($h-2);}else{$0l.push(" style='margin-top:0px;height:");$0l.push($h);};$0l.push("px;background-color:");$0l.push(this.eventBackColor);if($0d){$0l.push(";border:1px solid ");$0l.push($0f);$0l.push(";-moz-border-radius:5px;");$0l.push(";-webkit-border-radius:5px;");$0l.push(";border-radius:5px;");}else{$0l.push(";border-left:1px solid ");$0l.push($0f);$0l.push(";border-right:1px solid ");$0l.push($0f);};$0l.push(";");$0l.push("' unselectable='on'>");var $0m=this.eventHeaderVisible?this.eventHeaderHeight:0;if(this.eventHeaderVisible){var $0n="";var $0o=$p.start().getHours();var am=$0o<12;var $0p=$p.start().getMinutes();if(this.timeFormat==="Clock12Hours"){$0o=$0o%12;if($0o===0){$0o=12;};$0n=am?"am":"pm";};if($0p<10){$0p="0"+$0p;};var $0q=$0o+":"+$0p+$0n;$0l.push("<div unselectable='on' style='overflow:hidden;height:");$0l.push(this.eventHeaderHeight);$0l.push("px; background-color:");$0l.push($0f);$0l.push(";font-size:");$0l.push(this.eventHeaderFontSize);$0l.push(";color:");$0l.push(this.eventHeaderFontColor);$0l.push("'>");$0l.push($0q);$0l.push("</div>");};$0l.push("<div unselectable='on' style='overflow:hidden;padding-left:2px;height:");$0l.push($h-$0m-1);$0l.push("px;'>");$0l.push($p.client.html());$0l.push("</div></div>");$X.innerHTML=$0l.join('');}else{var $0r=document.createElement("div");$0r.setAttribute("unselectable","on");$0r.className=$c.$1M("_event_inner");$0r.innerHTML=$p.client.html();if($p.data.backColor){$0r.style.background=$p.data.backColor;if(DayPilot.browser.ie9||DayPilot.browser.ielt9){$0r.style.filter='';}};$X.appendChild($0r);if($p.client.barVisible()){var $h=$p.part.height-2;var $0s=100*$p.part.barTop/$h;var $0t=Math.ceil(100*$p.part.barHeight/$h);var $0u=document.createElement("div");$0u.setAttribute("unselectable","on");$0u.className=this.$1M("_event_bar");$0u.style.position="absolute";if($p.data.barBackColor){$0u.style.backgroundColor=$p.data.barBackColor;};var $0v=document.createElement("div");$0v.setAttribute("unselectable","on");$0v.className=this.$1M("_event_bar_inner");$0v.style.top=$0s+"%";if(0<$0t&&$0t<=1){$0v.style.height="1px";}else{$0v.style.height=$0t+"%";};if($p.data.barColor){$0v.style.backgroundColor=$p.data.barColor;};$0u.appendChild($0v);$X.appendChild($0u);}};if($0b.rows[0].cells[$p.part.dayIndex]){var $0w=$0b.rows[0].cells[$p.part.dayIndex].firstChild;$0w.appendChild($X);$c.makeChildrenUnselectable($X);};$c.elements.events.push($X);};this.makeChildrenUnselectable=function(el){var c=(el&&el.childNodes)?el.childNodes.length:0;for(var i=0;i<c;i++){try{var $0x=el.childNodes[i];if($0x.nodeType===1){$0x.unselectable='on';this.makeChildrenUnselectable($0x);}}catch(e){}}};this.drawEvents=function(){for(var i=0;i<this.columns.length;i++){var $0y=this.columns[i];if(!$0y.blocks){continue;};for(var m=0;m<$0y.blocks.length;m++){var $00=$0y.blocks[m];for(var j=0;j<$00.lines.length;j++){var $03=$00.lines[j];for(var k=0;k<$03.length;k++){var e=$03[k];e.part.width=100/$00.lines.length;e.part.left=e.part.width*j;var $0z=(j===$00.lines.length-1);if(!$0z){e.part.width=e.part.width*1.5;};this.$1N(e);}}}}};this.drawTop=function(){this.nav.top.innerHTML='';if(this.cssOnly){DayPilot.Util.addClass(this.nav.top,this.$1M("_main"));}else{this.nav.top.style.lineHeight="1.2";this.nav.top.style.textAlign="left";};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.position='relative';this.nav.top.style.width=this.width?this.width:'100%';if(this.hideUntilInit){this.nav.top.style.visibility='hidden';};if(!this.visible){this.nav.top.style.display="none";};this.nav.scroll=document.createElement("div");this.nav.scroll.style.height=this.getScrollableHeight()+"px";if(this.heightSpec==='BusinessHours'){this.nav.scroll.style.overflow="auto";}else{this.nav.scroll.style.overflow="hidden";};this.nav.scroll.style.position="relative";if(!this.cssOnly){this.nav.scroll.style.border="1px solid "+this.borderColor;this.nav.scroll.style.backgroundColor=this.hourNameBackColor;};var $0A=this.drawTopHeaderDiv();this.nav.top.appendChild($0A);this.nav.scroll.style.zoom=1;var $0B=this.drawScrollable();this.nav.scrollable=$0B.firstChild;this.nav.scroll.appendChild($0B);this.nav.top.appendChild(this.nav.scroll);this.nav.scrollLayer=document.createElement("div");this.nav.scrollLayer.style.position='absolute';this.nav.scrollLayer.style.top='0px';this.nav.scrollLayer.style.left='0px';this.nav.top.appendChild(this.nav.scrollLayer);this.nav.loading=document.createElement("div");this.nav.loading.style.position='absolute';this.nav.loading.style.top='0px';this.nav.loading.style.left=(this.hourWidth+5)+"px";this.nav.loading.style.backgroundColor=this.loadingLabelBackColor;this.nav.loading.style.fontSize=this.loadingLabelFontSize;this.nav.loading.style.fontFamily=this.loadingLabelFontFamily;this.nav.loading.style.color=this.loadingLabelFontColor;this.nav.loading.style.padding='2px';this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.display='none';this.nav.top.appendChild(this.nav.loading);};this.drawHourTable=function(){if(!this.fasterDispose)DayPilot.pu(this.nav.hourTable);this.nav.scrollable.rows[0].cells[0].innerHTML='';this.nav.hourTable=this.createHourTable();this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable);};this.drawScrollable=function(){var $0C=document.createElement("div");$0C.style.zoom=1;$0C.style.position='relative';var $0D=document.createElement("table");$0D.cellSpacing="0";$0D.cellPadding="0";$0D.border="0";$0D.style.border="0px none";$0D.style.width="100%";$0D.style.position='absolute';var r=$0D.insertRow(-1);var c;c=r.insertCell(-1);c.valign="top";c.style.padding='0px';c.style.border='0px none';this.nav.hourTable=this.createHourTable();c.appendChild(this.nav.hourTable);c=r.insertCell(-1);c.valign="top";c.width="100%";c.style.padding='0px';c.style.border='0px none';if(!this.cssOnly){c.appendChild(this.createEventsAndCells());}else{var $0B=document.createElement("div");$0B.style.position="relative";c.appendChild($0B);$0B.appendChild(this.createEventsAndCells());$0B.appendChild(this.$1O());};$0C.appendChild($0D);this.nav.zoom=$0C;return $0C;};this.createEventsAndCells=function(){var $0D=document.createElement("table");$0D.cellPadding="0";$0D.cellSpacing="0";$0D.border="0";$0D.style.width="100%";$0D.style.border="0px none";$0D.style.tableLayout='fixed';if(!this.cssOnly){$0D.style.borderLeft="1px solid "+this.borderColor;};this.nav.main=$0D;this.nav.events=$0D;return $0D;};this.$1O=function(){var $0D=document.createElement("table");$0D.style.top="0px";$0D.cellPadding="0";$0D.cellSpacing="0";$0D.border="0";$0D.style.position="absolute";$0D.style.width="100%";$0D.style.border="0px none";$0D.style.tableLayout='fixed';this.nav.events=$0D;var $0E=true;var $05=this.columns;var cl=$05.length;var r=($0E)?$0D.insertRow(-1):$0D.rows[0];for(var j=0;j<cl;j++){var c=($0E)?r.insertCell(-1):r.cells[j];if($0E){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}};return $0D;};this.createHourTable=function(){var $0D=document.createElement("table");$0D.cellSpacing="0";$0D.cellPadding="0";$0D.border="0";$0D.style.border='0px none';$0D.style.width=this.hourWidth+"px";$0D.oncontextmenu=function(){return false;};var $0F=this.cssOnly?0:1;if($0F){var r=$0D.insertRow(-1);r.style.height="1px";r.style.backgroundColor="white";var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';};var $0G=24;for(var i=0;i<$0G;i++){this.createHourRow($0D,i);};return $0D;};this.createHourRow=function($0D,i){var $h=(this.cellHeight*2);var r=$0D.insertRow(-1);r.style.height=$h+"px";var c=r.insertCell(-1);c.valign="bottom";c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.style.cursor="default";c.style.padding='0px';c.style.border='0px none';var $0H=document.createElement("div");$0H.style.position="relative";if(this.cssOnly){$0H.className=this.$1M("_rowheader");};$0H.style.width=this.hourWidth+"px";$0H.style.height=($h)+"px";$0H.style.overflow='hidden';$0H.unselectable='on';var $00=document.createElement("div");if(this.cssOnly){$00.className=this.$1M("_rowheader_inner");}else{$00.style.borderBottom="1px solid "+this.hourNameBorderColor;$00.style.textAlign="right";};$00.style.height=($h-1)+"px";$00.unselectable="on";var $0q=document.createElement("div");if(!this.cssOnly){$0q.style.padding="2px";$0q.style.fontFamily=this.hourFontFamily;$0q.style.fontSize=this.hourFontSize;$0q.style.color=this.hourFontColor;};$0q.unselectable="on";var $J=this.startDate.addHours(i);var $0o=$J.getHours();var am=$0o<12;if(this.timeFormat==="Clock12Hours"){$0o=$0o%12;if($0o===0){$0o=12;}};$0q.innerHTML=$0o;var $0I=document.createElement("span");$0I.unselectable="on";if(!this.cssOnly){$0I.style.fontSize="10px";$0I.style.verticalAlign="super";}else{$0I.className=this.$1M("_rowheader_minutes");};var $0J;if(this.timeFormat==="Clock12Hours"){if(am){$0J="AM";}else{$0J="PM";}}else{$0J="00";};if(!this.cssOnly){$0I.innerHTML="&nbsp;"+$0J;}else{$0I.innerHTML=$0J;};$0q.appendChild($0I);$00.appendChild($0q);$0H.appendChild($00);c.appendChild($0H);};this.getScrollableHeight=function(){switch(this.heightSpec){case "Full":return(24*2*this.cellHeight);case "BusinessHours":var $0K=this.businessHoursSpan();return $0K*this.cellHeight*2;case "BusinessHoursNoScroll":var $0K=this.businessHoursSpan();return $0K*this.cellHeight*2;default:throw "DayPilot.Calendar: Unexpected 'heightSpec' value.";}};this.drawTopHeaderDiv=function(){var $0A=document.createElement("div");if(!this.cssOnly){$0A.style.borderLeft="1px solid "+this.borderColor;$0A.style.borderRight="1px solid "+this.borderColor;};$0A.style.overflow="auto";var $0D=document.createElement("table");$0D.cellPadding="0";$0D.cellSpacing="0";$0D.border="0";$0D.style.width="100%";$0D.style.borderCollapse='separate';$0D.style.border="0px none";var r=$0D.insertRow(-1);var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';var $0L=this.drawCorner();c.appendChild($0L);this.nav.corner=$0L;c=r.insertCell(-1);c.style.width="100%";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.valign="top";c.style.position='relative';c.style.padding='0px';c.style.border='0px none';this.nav.header=document.createElement("table");this.nav.header.cellPadding="0";this.nav.header.cellSpacing="0";this.nav.header.border="0";this.nav.header.width="100%";this.nav.header.style.tableLayout="fixed";if(!this.cssOnly){this.nav.header.style.borderBottom="0px none #000000";this.nav.header.style.borderRight="0px none #000000";this.nav.header.style.borderLeft="1px solid "+this.borderColor;this.nav.header.style.borderTop="1px solid "+this.borderColor;};this.nav.header.oncontextmenu=function(){return false;};var $0M=this.nav.scroll.style.overflow!=='hidden';if(!this.cssOnly){if($0M){this.nav.header.style.borderRight="1px solid "+this.borderColor;}};c.appendChild(this.nav.header);if($0M){c=r.insertCell(-1);c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;c.style.borderTop="1px solid "+this.borderColor;c.style.borderBottom="0px none";c.style.borderLeft="0px none";c.style.borderRight="0px none";c.style.padding='0px';c.style.verticalAlign='top';c.innerHTML="&nbsp;";};var $0l=document.createElement("div");$0l.unselectable="on";$0l.style.position="relative";$0l.style.width="16px";if(!this.cssOnly){$0l.style.lineHeight="1px";$0l.style.fontSize="1px";$0l.style.height="1px";}else{$0l.style.height=this.headerHeight+"px";$0l.className=this.$1M("_cornerright");var $0r=document.createElement("div");$0r.className=this.$1M('_cornerright_inner');$0l.appendChild($0r);};c.appendChild($0l);this.nav.cornerRight=$0l;};$0A.appendChild($0D);return $0A;};this.drawCorner=function(){var $0B=document.createElement("div");$0B.style.position='relative';if(this.cssOnly){$0B.className=this.$1M("_corner");}else{$0B.style.backgroundColor=this.hourNameBackColor;$0B.style.fontFamily=this.headerFontFamily;$0B.style.fontSize=this.headerFontSize;$0B.style.color=this.headerFontColor;$0B.style.borderTop="1px solid "+this.borderColor;};$0B.style.width=this.hourWidth+"px";$0B.style.height=this.headerHeight+"px";$0B.oncontextmenu=function(){return false;};var $0L=document.createElement("div");$0L.unselectable="on";if(this.cssOnly){$0L.className=this.$1M("_corner_inner");};$0B.appendChild($0L);return $0B;};this.disposeMain=function(){var $0D=this.nav.main;$0D.root=null;$0D.onmouseup=null;for(var y=0;y<$0D.rows.length;y++){var r=$0D.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.root=null;c.onmousedown=null;c.onmousemove=null;c.onmouseout=null;c.onmouseup=null;}};if(!this.fasterDispose)DayPilot.pu($0D);};this.drawMain=function(){var $0N=[];var $0O=[];var $0D=this.nav.main;var $L=30*60*1000;var $0P=this.rowCount();var $05=$c.columns;var $0E=!this.tableCreated||$05.length!==$0D.rows[0].cells.length||$0P!==$0D.rows.length;if($0D){this.disposeMain();}while($0D&&$0D.rows&&$0D.rows.length>0&&$0E){if(!this.fasterDispose){DayPilot.pu($0D.rows[0]);};$0D.deleteRow(0);};this.tableCreated=true;var cl=$05.length;if(this.cssOnly){var $0Q=this.nav.events;while($0Q&&$0Q.rows&&$0Q.rows.length>0&&$0E){if(!this.fasterDispose){DayPilot.pu($0Q.rows[0]);};$0Q.deleteRow(0);};var cl=$05.length;var r=($0E)?$0Q.insertRow(-1):$0Q.rows[0];for(var j=0;j<cl;j++){var c=($0E)?r.insertCell(-1):r.cells[j];if($0E){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}}};if(!this.cssOnly){var r=($0E)?$0D.insertRow(-1):$0D.rows[0];if($0E){r.style.backgroundColor='white';};for(var j=0;j<cl;j++){var c=($0E)?r.insertCell(-1):r.cells[j];if($0E){c.style.padding='0px';c.style.border='0px none';c.style.height='1px';c.style.overflow='visible';c.style.width=(100.0/$05.length)+"%";var $X=document.createElement("div");$X.style.display='block';$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';$X.style.fontSize='1px';$X.style.lineHeight='1.2';$X.style.marginTop='-1px';c.appendChild($X);}}};for(var i=0;i<$0P;i++){var $0F=this.cssOnly?0:1;var r=($0E)?$0D.insertRow(-1):$0D.rows[i+$0F];if($0E){r.style.MozUserSelect='none';r.style.KhtmlUserSelect='none';};for(var j=0;j<cl;j++){var $0y=this.columns[j];var c=($0E)?r.insertCell(-1):r.cells[j];c.start=$0y.Start.addTime(i*$L);c.end=c.start.addTime($L);c.onmousedown=this.onCellMousedown;c.onmousemove=this.mousemove;c.onmouseup=function(){return false;};c.onclick=function(){return false;};if($0E){c.root=this;c.style.padding='0px';c.style.border='0px none';c.style.verticalAlign='top';if(!this.cssOnly){if(j!==cl-1){c.style.borderRight='1px solid '+$c.cellBorderColor;}};c.style.height=$c.cellHeight+'px';c.style.overflow='hidden';c.unselectable='on';if(!this.cssOnly){var $X=document.createElement("div");$X.unselectable='on';$X.style.fontSize='1px';$X.style.height='0px';var $0R=(c.end.getMinutes()+c.end.getSeconds()+c.end.getMilliseconds())>0;if($0R){if($c.hourHalfBorderColor!==''){$X.style.borderBottom='1px solid '+$c.hourHalfBorderColor;}}else{if($c.hourBorderColor!==''){$X.style.borderBottom='1px solid '+$c.hourBorderColor;}};var $0S=document.createElement("div");$0S.style.height=($c.cellHeight-1)+"px";$0S.style.overflow='hidden';$0S.unselectable='on';c.appendChild($0S);}else{var $X=document.createElement("div");$X.unselectable='on';$X.style.height=$c.cellHeight+"px";$X.style.position="relative";$X.className=this.$1M("_cell");var $0T=this.$1P(c.start,c.end);if($0T&&this.cssOnly){DayPilot.Util.addClass($X,$c.$1M("_cell_business"));};var $0r=document.createElement("div");$0r.setAttribute("unselectable","on");$0r.className=this.$1M("_cell_inner");$X.appendChild($0r);c.appendChild($X);};c.appendChild($X);};c.style.backgroundColor=$c.cellBackColor;$0S=c.firstChild;}};$0D.onmouseup=this.mouseup;$0D.root=this;$c.nav.scrollable.onmousemove=function(ev){ev=ev||window.event;var $0U=$c.nav.scrollable;$c.coords=DayPilot.mo3($0U,ev);var $Y=DayPilot.mc(ev);if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizingShadow=$c.createShadow(DayPilotCalendar.resizing,false,$c.shadow);};var $0V=$c.cellHeight;var $I=1;var $0W=($Y.y-DayPilotCalendar.originalMouse.y);if(DayPilotCalendar.resizing.dpBorder==='bottom'){var $0X=Math.floor(((DayPilotCalendar.originalHeight+DayPilotCalendar.originalTop+$0W)+$0V/ 2)/ $0V)*$0V-DayPilotCalendar.originalTop+$I;if($0X<$0V)$0X=$0V;var $04=$c.nav.main.clientHeight;if(DayPilotCalendar.originalTop+$0X>$04)$0X=$04-DayPilotCalendar.originalTop;DayPilotCalendar.resizingShadow.style.height=($0X-4)+'px';}else if(DayPilotCalendar.resizing.dpBorder==='top'){var $0Y=Math.floor(((DayPilotCalendar.originalTop+$0W-$I)+$0V/ 2)/ $0V)*$0V+$I;if($0Y<$I){$0Y=$I;};if($0Y>DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0V){$0Y=DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0V;};var $0X=DayPilotCalendar.originalHeight-($0Y-DayPilotCalendar.originalTop)-4;if($0X<$0V){$0X=$0V;}else{DayPilotCalendar.resizingShadow.style.top=$0Y+'px';};DayPilotCalendar.resizingShadow.style.height=($0X)+'px';}}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.movingShadow=$c.createShadow(DayPilotCalendar.moving,!$c.ie,$c.shadow);DayPilotCalendar.movingShadow.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};if(!$c.coords){return;};var $0V=$c.cellHeight;var $I=1;var $0i=DayPilotCalendar.moveOffsetY;if(!$0i){$0i=$0V/2;};var $0Y=Math.floor((($c.coords.y-$0i-$I)+$0V/ 2)/ $0V)*$0V+$I;if($0Y<$I){$0Y=$I;};var $0b=$c.nav.events;var $04=$c.nav.main.clientHeight;var $h=parseInt(DayPilotCalendar.movingShadow.style.height);if($0Y+$h>$04){$0Y=$04-$h;};DayPilotCalendar.movingShadow.parentNode.style.display='none';DayPilotCalendar.movingShadow.style.top=$0Y+'px';DayPilotCalendar.movingShadow.parentNode.style.display='';var $0Z=$0b.clientWidth/$0b.rows[0].cells.length;var $m=Math.floor(($c.coords.x-45)/$0Z);if($m<0){$m=0;};if($m<$0b.rows[0].cells.length&&$m>=0&&DayPilotCalendar.movingShadow.column!==$m){DayPilotCalendar.movingShadow.column=$m;DayPilotCalendar.moveShadow($0b.rows[0].cells[$m]);}}};$c.nav.scrollable.style.display='';};this.$1P=function($J,end){if(this.businessBeginsHour<this.businessEndsHour){return !($J.getHours()<this.businessBeginsHour||$J.getHours()>=this.businessEndsHour||$J.getDayOfWeek()===6||$J.getDayOfWeek()===0);};if($J.getHours()>=this.businessBeginsHour){return true;};if($J.getHours()<this.businessEndsHour){return true;};return false;};this.disposeHeader=function(){var $0D=this.nav.header;if($0D&&$0D.rows){for(var y=0;y<$0D.rows.length;y++){var r=$0D.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.onclick=null;c.onmousemove=null;c.onmouseout=null;}}};if(!this.fasterDispose)DayPilot.pu($0D);};this.drawHeaderRow=function($0E){var r=($0E)?this.nav.header.insertRow(-1):this.nav.header.rows[0];var $05=this.columns;var $10=$05.length;for(var i=0;i<$10;i++){var $p=$05[i];var $d=($0E)?r.insertCell(-1):r.cells[i];$d.data=$p;$d.style.overflow='hidden';$d.style.padding='0px';$d.style.border='0px none';$d.style.height=(this.headerHeight)+"px";var $X=($0E)?document.createElement("div"):$d.firstChild;if($0E){$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.backgroundColor=$p.BackColor;$X.style.cursor='default';$X.style.position='relative';if(!this.cssOnly){$X.style.fontFamily=this.headerFontFamily;$X.style.fontSize=this.headerFontSize;$X.style.color=this.headerFontColor;if(i!==$10-1){$X.style.borderRight="1px solid "+this.borderColor;}}else{$X.className=$c.$1M('_colheader');};$X.style.height=this.headerHeight+"px";var $0q=document.createElement("div");if(!this.cssOnly){$0q.style.position='absolute';$0q.style.left='0px';$0q.style.width='100%';$0q.style.padding="2px";$X.style.textAlign='center';}else{$0q.className=$c.$1M('_colheader_inner');};$0q.unselectable='on';$X.appendChild($0q);$d.appendChild($X);};var $0q=$X.firstChild;$0q.innerHTML=$p.InnerHTML;}};this.widthUnit=function(){if(this.width&&this.width.indexOf("px")!==-1){return "Pixel";};return "Percentage";};this.drawHeader=function(){var $0A=this.nav.header;var $0E=true;var $05=this.columns;var $10=$05.length;if(this.headerCreated&&$0A&&$0A.rows&&$0A.rows.length>0){$0E=$0A.rows[$0A.rows.length-1].cells.length!==$10;}while(this.headerCreated&&$0A&&$0A.rows&&$0A.rows.length>0&&$0E){if(!this.fasterDispose)DayPilot.pu($0A.rows[0]);$0A.deleteRow(0);};this.headerCreated=true;if(!$0E){var $0L=$c.nav.corner;if(!this.cssOnly){$0L.style.backgroundColor=$c.cornerBackColor;};if(!this.fasterDispose)DayPilot.pu($0L.firstChild);};this.drawHeaderRow($0E);};this.loadingStart=function(){if(this.loadingLabelVisible){this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.top=(this.headerHeight+5)+"px";this.nav.loading.style.display='';}};this.commandCallBack=function($11,$p){var $F={};$F.command=$11;this.callBack2('Command',$p,$F);};this.loadingStop=function($12){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.nav.loading.style.display='none';};this.enableScrolling=function(){var $13=this.nav.scroll;var $14=(typeof this.$1Q.scrollpos!=='undefined')?this.$1Q.scrollpos:this.initScrollPos;if(!$14){return;};if($14==='Auto'){if(this.heightSpec==="BusinessHours"){$14=2*this.cellHeight*this.businessBeginsHour;}else{$14=0;}};$13.root=this;if($13.scrollTop===0){$13.scrollTop=$14;}};this.callbackError=function($t,$u){alert("Error!\r\nResult: "+$t+"\r\nContext:"+$u);};this.fixScrollHeader=function(){var w=DayPilot.sw(this.nav.scroll);var d=this.nav.cornerRight;if(d&&w>0){if(this.cssOnly){d.style.width=w+'px';}else{d.style.width=(w-3)+'px';}}};this.registerGlobalHandlers=function(){if(!DayPilotCalendar.globalHandlers){DayPilotCalendar.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotCalendar.gMouseUp);DayPilot.re(window,'unload',DayPilotCalendar.gUnload);}};this.events={};this.events.add=function(e){e.calendar=$c;if(!$c.events.list){$c.events.list=[];};$c.events.list.push(e.data);$c.update();$c.$1K.notify();};this.events.update=function(e){e.commit();$c.update();$c.$1K.notify();};this.events.remove=function(e){var $15=DayPilot.indexOf($c.events.list,e.data);$c.events.list.splice($15,1);$c.update();$c.$1K.notify();};this.update=function(){$c.$1R();$c.prepareVariables();$c.deleteEvents();var $16=true;if($16){$c.prepareColumns();$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.loadEvents();$c.updateHeaderHeight();$c.$1I();$c.drawEvents();$c.clearSelection();if(this.visible){this.show();}else{this.hide();}};this.$1S=function(){if(this.id&&this.id.tagName){this.nav.top=this.id;}else if(typeof this.id==="string"){this.nav.top=document.getElementById(this.id);if(!this.nav.top){throw "DayPilot.Calendar: The placeholder element not found: '"+id+"'.";}}else{throw "DayPilot.Calendar() constructor requires the target element or its ID as a parameter";}};this.loadEvents=function(){var $0Q=this.events.list;if(!$0Q){return;};var length=$0Q.length;var $17=24*60*60*1000;this.cache.pixels={};var $18=[];this.scrollLabels=[];this.minStart=10000;this.maxEnd=0;for(var i=0;i<length;i++){var e=$0Q[i];e.start=new DayPilot.Date(e.start);e.end=new DayPilot.Date(e.end);};for(var i=0;i<this.columns.length;i++){var scroll={};scroll.minEnd=1000000;scroll.maxStart=-1;this.scrollLabels.push(scroll);var $0y=this.columns[i];$0y.events=[];$0y.lines=[];$0y.blocks=[];var $19=new DayPilot.Date($0y.Start);var $1a=$19.getTime();var $1b=$19.addTime($17);var $1c=$1b.getTime();for(var j=0;j<length;j++){if($18[j]){continue;};var e=$0Q[j];var $J=e.start;var end=e.end;var $1d=$J.getTime();var $1e=end.getTime();if($1e<$1d){continue;};var $1f=!($1e<=$1a||$1d>=$1c);if($1f){var ep=new DayPilot.Event(e,$c);ep.part.dayIndex=i;ep.part.start=$1a<$1d?e.start:$19;ep.part.end=$1c>$1e?e.end:$1b;var $1g=this.getPixels(ep.part.start,$0y.Start);var $1h=this.getPixels(ep.part.end,$0y.Start);var top=$1g.top;var $1i=$1h.top;if(top===$1i&&($1g.cut||$1h.cut)){continue;};var $1j=$1h.boxBottom;ep.part.top=Math.floor(top/this.cellHeight)*this.cellHeight+1;ep.part.height=Math.max(Math.ceil($1j/this.cellHeight)*this.cellHeight-ep.part.top,this.cellHeight-1)+1;ep.part.barTop=Math.max(top-ep.part.top-1,0);ep.part.barHeight=Math.max($1i-top-2,1);var $J=ep.part.top;var end=ep.part.top+ep.part.height;if($J>scroll.maxStart){scroll.maxStart=$J;};if(end<scroll.minEnd){scroll.minEnd=end;};if($J<this.minStart){this.minStart=$J;};if(end>this.maxEnd){this.maxEnd=end;};$0y.events.push(ep);if(ep.part.start.getTime()===$1d&&ep.part.end.getTime()===$1e){$18[j]=true;}}}};for(var i=0;i<this.columns.length;i++){var $0y=this.columns[i];$0y.events.sort(this.eventComparer);for(var j=0;j<$0y.events.length;j++){var e=$0y.events[j];$0y.putIntoBlock(e);};for(var j=0;j<$0y.blocks.length;j++){var $00=$0y.blocks[j];$00.events.sort(this.eventComparer);for(var k=0;k<$00.events.length;k++){var e=$00.events[k];$00.putIntoLine(e);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $1k=a.start().getTime()-b.start().getTime();if($1k!==0){return $1k;};var $1l=b.end().getTime()-a.end().getTime();return $1l;};this.debug=function($12,$1m){if(!this.debuggingEnabled){return;};if(!$c.debugMessages){$c.debugMessages=[];};$c.debugMessages.push($12);if(typeof console!=='undefined'){console.log($12);}};this.getPixels=function($R,$J){if(!$J)$J=this.startDate;var $1d=$J.getTime();var $1n=$R.getTime();var $1o=this.cache.pixels[$1n+"_"+$1d];if($1o){return $1o;};$1d=$J.getTime();var $1p=30*60*1000;var $1q=$1n-$1d;var $1r=$1q%$1p;var $1s=$1q-$1r;var $1t=$1s+$1p;if($1r===0){$1t=$1s;};var $t={};$t.cut=false;$t.top=this.ticksToPixels($1q);$t.boxTop=this.ticksToPixels($1s);$t.boxBottom=this.ticksToPixels($1t);this.cache.pixels[$1n+"_"+$1d]=$t;return $t;};this.ticksToPixels=function($1n){return Math.floor((this.cellHeight*$1n)/(1000*60*30));};this.prepareVariables=function(){this.startDate=new DayPilot.Date(this.startDate);};this.updateHeaderHeight=function(){if(this.nav.corner){this.nav.corner.style.height=this.headerHeight+"px";}};this.updateHeight=function(){var sh=this.getScrollableHeight();if(this.nav.scroll&&sh>0){this.nav.scroll.style.height=sh+"px";}};this.$1K={};this.$1K.scope=null;this.$1K.notify=function(){if($c.$1K.scope){$c.$1K.scope["$apply"]();}};this.$1K.apply=function(f){if($c.angularAutoApply&&$c.$1K.scope){$c.$1K.scope["$apply"](f);}else{f();}};this.$1T=function(){if(this.backendUrl||typeof WebForm_DoCallback==='function'){return(typeof $c.events.list==='undefined')||(!$c.events.list);}else{return false;}};this.$1I=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.show=function(){$c.visible=true;$c.nav.top.style.display='';};this.hide=function(){$c.visible=false;$c.nav.top.style.display='none';};this.$1U=function(){this.prepareVariables();this.prepareColumns();this.drawTop();this.drawHeader();this.drawMain();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);this.callBack2('Init');};this.$1Q={};this.$1V=function(){this.$1Q.themes=[];this.$1Q.themes.push(this.theme||this.cssClassPrefix);};this.$1W=function(){var $1u=this.$1Q.themes;for(var i=0;i<$1u.length;i++){var $1v=$1u[i];DayPilot.Util.removeClass(this.nav.top,$1v+"_main");};this.$1Q.themes=[];};this.$1X=function(){this.afterRender(null,false);if(typeof this.onAfterRender==="function"){var $C={};$C.isCallBack=false;this.onAfterRender($C);}};this.$1Y=function(){if(typeof this.onInit==="function"&&!this.$1Z){this.$1Z=true;var $C={};this.onInit($C);}};this.$1R=function(){if(!$c.cssOnly){$c.cssOnly=true;window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported anymore.");}};this.init=function(){this.$1S();var $1w=this.$1T();this.$1R();loadDefaultCss();this.$1V();if($1w){this.$1U();return;};this.prepareVariables();this.prepareColumns();this.loadEvents();this.drawTop();this.drawHeader();this.drawMain();this.$1I();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);if(this.events){this.updateHeaderHeight();this.drawEvents();};this.$1X();this.$1Y();this.initialized=true;};this.Init=this.init;};DayPilotCalendar.Cell=function($J,end,$m){this.start=$J;this.end=end;this.column=function(){};};DayPilotCalendar.Column=function($1x,name,$R){this.value=$1x;this.name=name;this.date=new DayPilot.Date($R);};DayPilot.Calendar=DayPilotCalendar.Calendar;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotCalendar=function($1y){var $1z=null;var j=this.each(function(){if(this.daypilot){return;};var $1A=new DayPilot.Calendar(this.id);this.daypilot=$1A;for(name in $1y){$1A[name]=$1y[name];};$1A.init();if(!$1z){$1z=$1A;}});if(this.length===1){return $1z;}else{return j;}};})(jQuery);};(function registerAngularModule(){var $1B=DayPilot.am();if(!$1B){return;};$1B.directive("daypilotCalendar",function(){return{"restrict":"E","template":"<div></div>","replace":true,"link":function($1C,element,$1D){var $c=new DayPilot.Calendar(element[0]);$c.$1K.scope=$1C;$c.init();var $1E=$1D["id"];if($1E){$1C[$1E]=$c;};var $1F=$1C["$watch"];$1F.call($1C,$1D["daypilotConfig"],function($1x){for(var name in $1x){$c[name]=$1x[name];};$c.update();$c.$1Y();},true);$1F.call($1C,$1D["daypilotEvents"],function($1x){$c.events.list=$1x;$c.update();},true);}};});})();})();


